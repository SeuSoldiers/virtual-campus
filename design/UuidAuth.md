## å¯¹å¤–æ¥å£

### 1. ç™»å½•ï¼ˆè·å– tokenï¼‰

**POST** `/auth/login`

* **è¾“å…¥ï¼š**

```json
{
  "user_id": "stu01",
  "password": "123456"
}
```

* **è¾“å‡ºï¼š**

```json
{
  "code": 0,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "user_id": "stu01",
    "token": "550e8400-e29b-41d4-a716-446655440000",
    "role": "STUDENT",
    "expires_in": 3600
  }
}
```

* **è¯´æ˜ï¼š**

    * `token` æ˜¯ä¸´æ—¶ä¼šè¯IDï¼Œæœ‰æ•ˆæœŸ 3600 ç§’ï¼ˆå¯ç»­æœŸï¼‰ã€‚
    * `role` ç”¨äºåŒºåˆ†æƒé™ã€‚
    * `code` ä¸º 0 è¡¨ç¤ºæˆåŠŸï¼Œé 0 è¡¨ç¤ºå¤±è´¥ã€‚

---

### 2. ç™»å‡ºï¼ˆé”€æ¯ tokenï¼‰

**POST** `/auth/logout`

* **è¾“å…¥ï¼š**

```json
{
  "token": "550e8400-e29b-41d4-a716-446655440000"
}
```

* **è¾“å‡ºï¼š**

```json
{
  "code": 0,
  "message": "ç™»å‡ºæˆåŠŸ"
}
```

* **è¯´æ˜ï¼š**

    * `token` ä¸ºéœ€è¦é”€æ¯çš„ä¼šè¯IDã€‚

---

### 3. æ ¡éªŒå‡­è¯ï¼ˆé‰´æƒæ¥å£ï¼‰

**POST** `/auth/validate`

* **è¾“å…¥ï¼š**

```json
{
  "userId": "stu01",
  "uuid": "550e8400-e29b-41d4-a716-446655440000",
  "action": "borrowBook"
}
```

* **è¾“å‡ºï¼š**

```json
{
  "code": 0,
  "message": "éªŒè¯æˆåŠŸ",
  "data": {
    "uuidValid": true,
    "allowed": true
  }
}
```

* **è¯´æ˜ï¼š**

    * `uuidValid` è¡¨ç¤º uuid æ˜¯å¦æœ‰æ•ˆã€‚
    * `allowed` è¡¨ç¤ºæ˜¯å¦å…è®¸è¯¥è§’è‰²æ‰§è¡Œæ­¤æ“ä½œï¼ˆä¾‹å¦‚å­¦ç”Ÿä¸èƒ½ `addBook`ï¼‰ã€‚

---

### 4. åˆ·æ–°ä¼šè¯ï¼ˆç»­æœŸï¼‰

**POST** `/auth/refresh`

* **è¾“å…¥ï¼š**

```json
{
  "userId": "stu01",
  "uuid": "550e8400-e29b-41d4-a716-446655440000"
}
```

* **è¾“å‡ºï¼š**

```json
{
  "code": 0,
  "message": "ç»­æœŸæˆåŠŸ",
  "data": {
    "newExpiresIn": 3600
  }
}
```

### ğŸ”— å…¶ä»–æ¨¡å—è°ƒç”¨æµç¨‹

ä¾‹å¦‚ï¼š

* å­¦ç”Ÿè°ƒç”¨ **å›¾ä¹¦é¦†å€Ÿä¹¦ API** â†’ å›¾ä¹¦é¦†æ¨¡å—æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå…ˆæŠŠ `userId + uuid + action` å‘åˆ° `/auth/validate`ã€‚
* éªŒè¯æˆåŠŸ â†’ å›¾ä¹¦é¦†æ¨¡å—æ‰§è¡Œé€»è¾‘ï¼ˆå€Ÿä¹¦ï¼‰ã€‚
* éªŒè¯å¤±è´¥ â†’ å­¦ç”Ÿé‡æ–°ç™»å½•ã€‚
