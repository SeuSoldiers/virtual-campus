<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<VBox xmlns:fx="http://javafx.com/fxml" spacing="32" alignment="CENTER"
      fx:controller="seu.virtualcampus.ui.order.CheckoutController"
      style="-fx-font-family: 'Microsoft YaHei'; -fx-background-color: linear-gradient(to bottom, #a1c4fd, #d0e1ff); -fx-padding: 48 64; -fx-background-radius: 18; -fx-effect: dropshadow(gaussian, #8fb2ff, 16, 0.2, 0, 4);">
    
    <!-- 返回按钮 -->
    <HBox alignment="TOP_LEFT" spacing="16" style="-fx-padding: 0 0 0 0;">
        <Button text="返回购物车" onAction="#handleBackToCart"
                style="-fx-font-size: 16px; -fx-background-radius: 8; -fx-padding: 4 18; -fx-background-color: #b0b8c1; -fx-text-fill: #2d3a4a;"/>
    </HBox>

    <!-- 标题 -->
    <Label text="订单结算"
           style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #2d3a4a; -fx-padding: 0 0 16 0;"/>

    <!-- 结算内容 -->
    <HBox spacing="40" alignment="CENTER" maxWidth="1000">
        
        <!-- 左侧：订单预览 -->
        <VBox spacing="20" alignment="TOP_CENTER" prefWidth="500"
              style="-fx-background-color: #fff; -fx-background-radius: 12; -fx-padding: 24; -fx-effect: dropshadow(gaussian, #e0e7ef, 8, 0.1, 0, 2);">
            
            <Label text="订单预览"
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2d3a4a; -fx-padding: 0 0 12 0;"/>

            <!-- 商品列表 -->
            <TableView fx:id="orderItemsTable" prefHeight="300" prefWidth="450" style="-fx-font-size: 14px;">
                <columns>
                    <TableColumn fx:id="itemNameCol" text="商品名称" prefWidth="180"/>
                    <TableColumn fx:id="itemQuantityCol" text="数量" prefWidth="60"/>
                    <TableColumn fx:id="itemPriceCol" text="单价" prefWidth="80"/>
                    <TableColumn fx:id="itemSubtotalCol" text="小计" prefWidth="80"/>
                </columns>
            </TableView>

            <!-- 金额明细 -->
            <VBox spacing="8" style="-fx-padding: 16 0 0 0;">
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Label text="商品总额：" style="-fx-font-size: 16px; -fx-text-fill: #666;"/>
                    <Label fx:id="originalAmountLabel" text="¥0.00" 
                           style="-fx-font-size: 16px; -fx-text-fill: #666;"/>
                </HBox>
                
                <HBox fx:id="discountRow" spacing="10" alignment="CENTER_RIGHT" visible="false">
                    <Label text="优惠折扣：" style="-fx-font-size: 16px; -fx-text-fill: #43b244;"/>
                    <Label fx:id="discountLabel" text="-¥0.00" 
                           style="-fx-font-size: 16px; -fx-text-fill: #43b244;"/>
                </HBox>
                
                <Separator style="-fx-background-color: #e0e7ef;"/>
                
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Label text="应付金额：" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2d3a4a;"/>
                    <Label fx:id="finalAmountLabel" text="¥0.00" 
                           style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #ff6b35;"/>
                </HBox>
            </VBox>

        </VBox>

        <!-- 右侧：支付信息 -->
        <VBox spacing="20" alignment="TOP_CENTER" prefWidth="400"
              style="-fx-background-color: #fff; -fx-background-radius: 12; -fx-padding: 24; -fx-effect: dropshadow(gaussian, #e0e7ef, 8, 0.1, 0, 2);">
            
            <Label text="支付信息"
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2d3a4a; -fx-padding: 0 0 12 0;"/>

            <!-- 支付方式选择 -->
            <VBox spacing="12" alignment="CENTER_LEFT">
                <Label text="支付方式：" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2d3a4a;"/>
                <ChoiceBox fx:id="paymentMethodBox" prefWidth="300"
                           style="-fx-font-size: 16px;"/>
            </VBox>

            <!-- 银行账户信息 -->
            <VBox fx:id="accountInfoArea" spacing="12" alignment="CENTER_LEFT">
                <Label text="银行账户：" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2d3a4a;"/>
                <TextField fx:id="accountNumberField" promptText="请输入账户号码"
                           style="-fx-font-size: 16px; -fx-pref-width: 300; -fx-background-radius: 8; -fx-padding: 8;"/>
                <PasswordField fx:id="accountPasswordField" promptText="请输入账户密码"
                               style="-fx-font-size: 16px; -fx-pref-width: 300; -fx-background-radius: 8; -fx-padding: 8;"/>
            </VBox>

            <!-- 操作按钮 -->
            <VBox spacing="16" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
                <Button fx:id="previewButton" text="重新预览" onAction="#handlePreview" prefWidth="200"
                        style="-fx-font-size: 16px; -fx-background-radius: 8; -fx-padding: 8 24; -fx-background-color: #b0b8c1; -fx-text-fill: #2d3a4a;"/>
                
                <Button fx:id="createOrderButton" text="创建订单" onAction="#handleCreateOrder" prefWidth="200"
                        style="-fx-font-size: 18px; -fx-background-radius: 8; -fx-padding: 10 24; -fx-background-color: #4f8cff; -fx-text-fill: white;"/>
                
                <Button fx:id="payOrderButton" text="立即支付" onAction="#handlePayOrder" prefWidth="200" disable="true"
                        style="-fx-font-size: 18px; -fx-background-radius: 8; -fx-padding: 10 24; -fx-background-color: #4f8cff; -fx-text-fill: white;"/>
                
                <Button fx:id="viewOrderButton" text="查看订单" onAction="#handleViewOrder" prefWidth="200" disable="true"
                        style="-fx-font-size: 16px; -fx-background-radius: 8; -fx-padding: 8 24; -fx-background-color: #6aa8ff; -fx-text-fill: white;"/>
            </VBox>

        </VBox>

    </HBox>

    <!-- 状态消息 -->
    <Label fx:id="msgLabel" style="-fx-font-size: 14px; -fx-padding: 8 0 0 0;"/>

</VBox>
